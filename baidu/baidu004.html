<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <style type="text/css">
        .box{
            background: #ff0000;
            height: 40px;
            width: 40px;
            display: inline-block;
            margin-right: 20px;
            text-align: center;
            line-height: 40px;
        }
    </style>
</head>
<body>
    <div id="main">
        <form>
            <label>请输入<input type="text" id="textIn" name="inputText"></label>
            <button id="leftin" type="button">左侧入</button>
            <button id="rightin" type="button">右侧入</button>&nbsp;&nbsp;
            <button id="leftout" type="button">左侧出</button>
            <button id="rightout" type="button">右侧出</button>
        </form>
    </div>
    <script type="text/javascript">


        function addBox (addvalue) {
            var leftInValue = document.getElementById('textIn').value;
            if (leftInValue === ''){
                alert('该处不能为空,请输入数字。');
            }else if (isNaN(leftInValue)){
                alert ('该处不能为非数字，请更正为数字。');
            }else{
                var box1 = document.createElement('p');
                var text = document.createTextNode(leftInValue);
                var main = document.getElementById('main');
                box1.appendChild(text);
                box1.setAttribute('class','box');
                if (addvalue === 'left'){
                    if (main.children.length < 2){
                        main.appendChild(box1);
                    }else {
                        main.insertBefore(box1,main.getElementsByTagName('p')[0]);
                    }
                }else{
                    main.appendChild(box1)
                }
            }
            clickBox();
        }
        function minusBox(minusvalue) {
            if(document.getElementsByTagName('p').length > 0){
                if(minusvalue === 'left'){
                    var firstelement = document.getElementsByTagName('p')[0];
                    var leftoutvalue = document.getElementById('main').removeChild(firstelement);
                    var outmessage = '弹出字符块为：' + leftoutvalue.innerHTML;
                    alert(outmessage);
                }else{
                    var number = document.getElementsByTagName('p').length-1;
                    var lastelement = document.getElementsByTagName('p')[number];
                    var rightoutvalue = document.getElementById('main').removeChild(lastelement);
                    var outmessage1 = '弹出字符块为：' + rightoutvalue.innerHTML;
                    alert(outmessage1);
                }
            }else{
                alert('当前页面没有字符块');
            }
            clickBox();
        }
        function clickBox () {
            var elementsbox = document.getElementsByTagName('p');
            for(var i = 0;i<elementsbox.length;i++) {
                elementsbox[i].onclick = function () {
                    var outvalue = document.getElementById('main').removeChild(this);
                    var outmessage = '弹出字符块为：' + outvalue.innerHTML;
                    alert(outmessage);
                }
            }
        }
        var leftIn = document.getElementById('leftin');
        var rightIn = document.getElementById('rightin');
        var leftOut = document.getElementById('leftout');
        var rightOut = document.getElementById('rightout');
        leftIn.onclick = function () {
            addBox('left');
        };
        rightIn.onclick = function () {
            addBox('right');
        };
        leftOut.onclick = function () {
            minusBox('left');
        };
        rightOut.onclick = function () {
            minusBox('right');
        };
    </script>

</body>
</html>